<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<title>Formulario Combustible Ordinario</title>
	<meta charset="utf-8">
	<head th:replace="/layout/layoutHeadMetaData :: head"></head>
<body onload="cargar()">
	<header th:replace="/layout/layoutHeadMetaData :: header"></header>
<section>
	 <div class="tab-content">
	      <div class="form-group last col-sm-12 formfondo" >
	                <div class="row">
	                    <div class="tab-content">
	                        <div class="col-sm-12">
	                            <div class="item-wrap">
	                                <div class="row">
	                                    <div class="col-md-12">
	                                        <form th:action="@{/formComb}" th:object="${combustible}"  enctype="multipart/form-data" method="post" id="formulario"  name="visitas" data-toggle="validator" class="popup-form">
	                                            <div class="row">
	                                            
													        <!--Placas-->
	
															   <div class="form-group col-sm-2">
																<div class="help-block with-errors" ></div>
																		<input th:field="*{vehiculo.placa}"  name="placa" id="placa" class="form-control" type="text" disabled>																	
												                        <div class="input-group-icon" style="height: 38px;"><i class="fas fa-car-side"></i></div>
												                    </div>
												               
												               <div class="col-sm-2" style=" width:40%; padding-left: 3px;">
																		<input  type="text" readonly="readonly"  placeholder="Placa" class="form-control" disabled>
															   </div>
															   
															   <div class="form-group col-sm-7"></div>
															    
											                   <!--Vale-->
	
															   <div class="form-group col-sm-2">
																<div class="help-block with-errors" ></div>
																		<input th:field="*{vehiculo.tipo_vale.descr_vale}"  name="vale" id="vale" class="form-control" type="text" disabled>																	
												                        <div class="input-group-icon" style="height: 38px;"><i class="fas fa-car-side"></i></div>
												                    </div>
												               
												               <div class="col-sm-2" style=" width:40%; padding-left: 3px;">
																		<input  type="text" readonly="readonly"  placeholder="Vale" class="form-control" disabled>
															   </div>
															   
															   <!--Presupuesto-->
	
															  <!-- <div class="form-group col-sm-2">
																<div class="help-block with-errors" ></div>
																		<input th:if="${totaldias == 28}" th:field="*{vehiculo.tipo_vale.month_28}"  name="vale" id="vale" class="form-control" type="text" disabled>
																		<input th:if="${totaldias == 29}" th:field="*{vehiculo.tipo_vale.month_29}"  name="vale" id="vale" class="form-control" type="text" disabled>
																		<input th:if="${totaldias == 30}" th:field="*{vehiculo.tipo_vale.month_30}"  name="vale" id="vale" class="form-control" type="text" disabled>
																		<input th:if="${totaldias == 31}" th:field="*{vehiculo.tipo_vale.month_31}"  name="vale" id="vale" class="form-control" type="text" disabled>													
												                        <div class="input-group-icon" style="height: 38px;"><i class="fas fa-hashtag"></i></div>
												                    </div>
												               
												               <div class="col-sm-2" style=" width:40%; padding-left: 3px;">
																		<input  type="text" readonly="readonly"  placeholder="Presupuesto" class="form-control" disabled>
															   </div>  -->
							    								
	                                                    <!--Presupuesto-->
	
	                                                   <div class="form-group col-sm-4">
	                                                            <div class="help-block with-errors"></div>
	                                                            <input th:field="*{presupuesto_ord}"  id="presu" placeholder="Presupuesto" class="form-control signos" type="number" required data-error="Ingrese el Presupuesto" disabled/>
	                                                            <div class="input-group-icon"><i class="fas fa-hashtag"></i></div>
	                                                    </div>
	                                                    
	                                                     <div class="col-sm-2" style=" width:40%; padding-left: 3px;">
																		<input  type="text" readonly="readonly"  placeholder="Presupuesto" class="form-control" disabled>
													     </div>
	                                              
	                                                    <!--no_tarjeta-->
	                                                    <div class="form-group col-sm-4">
	                                                            <div class="help-block with-errors"></div>
	                                                            <input th:field="*{no_tarjeta}"  id="Num" placeholder="Numero de Tarjeta" class="form-control signos" type="text" required data-error="Ingrese el Numero Tarjeta" disabled/>
	                                                            <div class="input-group-icon"><i class="fas fa-hashtag"></i></div>
	                                                    </div>
	                                                    
	                                                     <div class="col-sm-2" style=" width:40%; padding-left: 3px;">
																		<input  type="text" readonly="readonly"  placeholder="No Tarjeta" class="form-control" disabled>
													     </div>
	                                                    
	                                                    <div class="form-group col-sm-6"></div>
	                                                    
	                                                     <!--kilometraje_ord-->
	                                                    <div class="form-group col-sm-4">
	                                                            <div class="help-block with-errors"></div>
	                                                            <input th:field="*{kilometraje_ord}" th:value="*{kilometraje_ord}" id="Kilo" placeholder="Kilometraje Actual" class="form-control signos" type="text" disabled/>
	                                                            <div class="input-group-icon"><i class="fas fa-car-side"></i></div>
	                                                    </div>
	                                                    
	                                                    <div class="col-sm-2" style=" width:40%; padding-left: 3px;">
																		<input  type="text" readonly="readonly"  placeholder="Kilometraje" class="form-control" disabled>
													     </div>
	                                                    
	                                                    <div class="form-group col-sm-6"></div>
	                                                
	 													<!--Fecha inicial-->
	                                                    <div class="form-group col-sm-2">
	                                                            <div class="help-block with-errors"></div>
	                                                            <input th:field="*{fecha_ini_ord}" id="FIn" min="2010-01-01" max="2050-12-31" placeholder="Fecha de inicio" class="form-control signos" type="date" required data-error="Ingrese la fecha Inicial"/>
	                                                            <div class="input-group-icon"><i class="far fa-calendar-alt"></i></div>
	                                                    </div>

	                                                    <div class="col-sm-2" style=" width:40%; padding-left: 3px;">
																		<input  type="text" readonly="readonly"  placeholder="Fecha Inicio" class="form-control" disabled>
													     </div>
													     
	                                                    <div class="form-group col-sm-8 enlineaform"></div>
	                                                    
	                                                    <!--Fecha inicial-->
	                                                    
	                                                     <div class="form-group col-sm-2">
	                                                            <div class="help-block with-errors"></div>
	                                                            <input th:field="*{fecha_fin_ord}" id="FIn" min="2010-01-01" max="2050-12-31" placeholder="Fecha de inicio" class="form-control signos" type="date" required data-error="Ingrese la fecha Inicial"/>
	                                                            <div class="input-group-icon"><i class="far fa-calendar-alt"></i></div>
	                                                    </div>
	                                                    
	                                                       <div class="col-sm-2" style=" width:40%; padding-left: 3px;">
																		<input  type="text" readonly="readonly"  placeholder="Fecha Fin" class="form-control" disabled>
													     </div>
													     
													     <div class="form-group col-sm-8 enlineaform"></div>
	                                                
	                                                     <h3 style="margin-left:1%;margin-top:.3%;margin-bottom: 3%;">Documento</h3> 
	                                                          
	                                                     <!--Adjuntar documento -->
	                                                     
            										     <div class="form-group col-sm-12 enlineaform" th:if="${editar == false}">
															<p style="margin-bottom:2rem;">Foto del Odometro</p>
															<div class="col-sm-4"  id="Ndocumento">
																<div class="help-block with-errors"></div>
																<input id="doc" type="file" name="file" class="form-control" accept="image/png, image/jpg, image/jpeg" required data-error="Ingresa una imagen menor a 10 MB."/>																
															</div>
														</div> 
									
													     <div class="form-group col-sm-12" th:if="${editar == true}">	
													     																													
															<div id="aBtnGroup" class="btn-group">
															    <button  th:if="${existe} == true" type="button" value="D" class="btn btn-default">Documento</button>
															    <button  th:if="${existe} == true" type="button" value="N" class="btn btn-default">Nuevo Documento</button>															    
															  </div> 
								
															<div th:if="${existe} == false" class="col-sm-6" id="Ndocumentodo">
															<p>Foto del Odometro</p>
																<div   class="help-block with-errors"></div>
																<input id="doc2" type="file" name="file" class="form-control" accept="image/png, image/jpg, image/jpeg" data-error="Ingresa una imagen menor a 10 MB."/>
															</div>	
															 
															<div th:if="${existe} == true" class="col-sm-6" id="Ndocumento"  style="margin-top: 20px; display: none;">
															<p>Foto del Odometro</p>
																<div   class="help-block with-errors"></div>
																<input id="doc2" type="file" name="file" class="form-control" accept="image/png, image/jpg, image/jpeg" data-error="Ingresa una imagen menor a 10 MB."/>
															</div>															
														
														
													    	<div th:if="${existe} == true" id="Mdocumento" class=" col-sm-12" style="margin-top: 20px;">
															<div   class="card-body d-flex justify-content-center enlinea" >
																	<embed th:src="@{'/upload/' + ${Odometro.odometro}}" type="application/pdf" class="col-sm-12" style="height:715px;"/>
															</div>
														
														</div>
														</div>	
							
	                                                    <input type="hidden" th:field="${Odometro.id_odo}"/>                                                     
	                                                    <input type="hidden" th:field="*{id_asignacion}"/>
														<input type="hidden" th:field="*{vehiculo}"/>
														<input type="hidden" th:field="${Odometro.odometro}"/> 
														<input type="hidden" th:field="*{presupuesto_ord}"/>
														<input type="hidden" th:field="*{no_tarjeta}"/>
													
													    <div class="form-group col-sm-8 enlineaform"></div>
														
	                                                    <!--Boton Guardar-->
	                                                    
	                                                    <div class="form-group last col-sm-12">
	                                                            <button type="submit" id="guardar" class="btn btn-custom"><i class='fa fa-envelope'></i> Guardar</button>
	                                                    </div>
	                                                    <div class="clearfix"></div>
	                                            </div>
	                                        </form>
	                                    </div>
	                                </div>
	                            </div>
	                        </div>
	                    </div>
	                </div>
			</div>
			
		</div>
	</section>
	<script type="text/javascript">
		function cargar(){
			var d = new Date();
			var month = d.getMonth()+2;
			var day = d.getDate();	
			
			var output = d.getFullYear()+ '-' +
		    ((month<10 ? '0' : '') + month)+ '-' +
		    (day<10 ? '0' : '') + day ;
			
			$("#Ffin").val(output);
		}
		
		$('#aBtnGroup button').on('click', function() {
			var thisBtn = $(this);
			var btnText = thisBtn.text();
			var btnValue = thisBtn.val();
			thisBtn.addClass('active').siblings().removeClass('active');
		    if(btnValue == "D"){ 
		    	
		    	$("#Mdocumento").show();
		    	$("#Ndocumento").hide();
		    
		    };
		    if(btnValue == "N"){ 
		    	$("#Mdocumento").hide();
		    	$("#Ndocumento").show();
		    
		    };
		});
		
		$("#doc").change(function(){
			 
			var fileSize = this.files[0].size;

			if(fileSize > 3000000){
				swal("", "El archivo no debe superar los 3MB", "error");
				this.value = '';
				this.files[0].name = '';
			}else{
				 var fileName = this.files[0].name;
				// recuperamos la extensión del archivo
				var ext = fileName.split('.').pop();
				
				// Convertimos en minúscula porque 
				// la extensión del archivo puede estar en mayúscula
				ext = ext.toLowerCase();
		    
				// console.log(ext);
				switch (ext) {
					case 'jpg':break;
					case 'jpeg':break;
					case 'png':break;					
					default:
						swal("", "El archivo no tiene la extensión adecuada", "error");
						this.value = ''; // reset del valor
						this.files[0].name = '';
				}
				this.files[0].name = 'TC';
				console.log(this.files[0].name);
			}
	  	
	  });
		
		$("#doc2").change(function(){
			 
			var fileSize = this.files[0].size;

			if(fileSize > 3000000){
				swal("", "El archivo no debe superar los 3MB", "error");
				this.value = '';
				this.files[0].name = '';
			}else{
				 var fileName = this.files[0].name;
				// recuperamos la extensión del archivo
				var ext = fileName.split('.').pop();
				
				// Convertimos en minúscula porque 
				// la extensión del archivo puede estar en mayúscula
				ext = ext.toLowerCase();
		    
				// console.log(ext);
				switch (ext) {
					case 'jpg':break;
					case 'jpeg':break;
					case 'png':break;
					
					default:
						swal("", "El archivo no tiene la extensión adecuada", "error");
						this.value = ''; // reset del valor
						this.files[0].name = '';
				}
				this.files[0].name = 'TC';
				console.log(this.files[0].name);
			}
	  	
	  });
	</script>
	
	<script src="/assets/js/CambiosEstado.js"></script> 
	<!-- jQuery Library -->
	<script src="/assets/js/jquery-3.4.1.min.js"></script>
	<!-- Popper js -->
	<script src="/assets/js/popper.min.js"></script>
	<!-- Bootstrap Js -->
	<script src="/assets/js/bootstrap.min.js"></script>
	<!-- Form Validator -->
	<script src="/assets/js/validator.min.js"></script>
	<!-- Contact Form Js -->
	<script src="/assets/js/contact-form.js"></script>
	 <!-- SweetAlert -->
	<script src="/assets/SweetAlert2/sweetalert2.min.js"></script>
	 
 
</body>
</html>
